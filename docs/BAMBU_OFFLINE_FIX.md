# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ Bambu Lab –≤ –≤–µ–±-–ø–∞–Ω–µ–ª–∏

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

**Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–ª —Ä–∞–∑–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã:**
- **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** Offline ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- **–í–µ–±-–ø–∞–Ω–µ–ª—å:** Online ‚ùå (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

**–ü—Ä–∏—á–∏–Ω–∞:** Web-—Å–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–ª —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞, –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—è —Ä–µ–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è MQTT –∞–¥–∞–ø—Ç–µ—Ä–∞.

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –§–∞–π–ª: `src/printer-manager.js`

**–ë—ã–ª–æ:**
```javascript
// –î–ª—è Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤
if (printer.type === 'bambu' && this.bambuConnections.has(printerId)) {
  const adapter = this.bambuConnections.get(printerId);
  const statusData = {
    state: adapter.getStatus(),        // ‚Üê –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª –¥–∞–Ω–Ω—ã–µ
    stateText: adapter.getStateText(),
    progress: adapter.getProgress(),
    fileName: adapter.getFileName(),
    temps: adapter.getTemperatures()
  };
  
  return statusData;  // ‚Üê –î–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–∏–Ω—Ç–µ—Ä offline!
}
```

**–°—Ç–∞–ª–æ:**
```javascript
// –î–ª—è Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤
if (printer.type === 'bambu' && this.bambuConnections.has(printerId)) {
  const adapter = this.bambuConnections.get(printerId);
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∞–¥–∞–ø—Ç–µ—Ä–∞
  const isConnected = adapter.isConnected;  // ‚Üê –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!
  
  if (isConnected) {
    // –ü—Ä–∏–Ω—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    const statusData = {
      state: adapter.getStatus(),
      stateText: adapter.getStateText(),
      progress: adapter.getProgress(),
      fileName: adapter.getFileName(),
      temps: adapter.getTemperatures()
    };
    
    this.printerCache.set(printerId, statusData);
    return statusData;
  } else {
    // –ê–¥–∞–ø—Ç–µ—Ä –µ—Å—Ç—å, –Ω–æ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º offline
    const offlineData = {
      state: 'offline',           // ‚Üê –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ offline
      stateText: 'Offline',
      progress: 0,
      fileName: '',
      temps: { nozzle: 0, bed: 0 }
    };
    
    this.printerCache.set(printerId, offlineData);
    return offlineData;
  }
}
```

---

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω:
```
1. MQTT –∞–¥–∞–ø—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω (adapter.isConnected = true)
   ‚Üì
2. –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ MQTT
   ‚Üì
3. Web-–ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: Online, —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

### Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä –æ—Ç–∫–ª—é—á–µ–Ω:
```
1. MQTT –∞–¥–∞–ø—Ç–µ—Ä –æ—Ç–∫–ª—é—á–µ–Ω (adapter.isConnected = false)
   ‚Üì
2. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º offline –¥–∞–Ω–Ω—ã–µ
   ‚Üì
3. Web-–ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: Offline
```

---

## ‚úÖ –¢–µ–ø–µ—Ä—å —Å—Ç–∞—Ç—É—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

### –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```
Bambu Lab Printer
üü¢ Offline (MQTT)
```

### –í–µ–±-–ø–∞–Ω–µ–ª—å:
```
Bambu Lab Printer
üü¢ Offline (MQTT)  ‚Üê –¢–µ–ø–µ—Ä—å —Å–æ–≤–ø–∞–¥–∞–µ—Ç!
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –í BambuLabAdapter:
```javascript
class BambuLabAdapter {
  constructor(printer) {
    this.isConnected = false;  // ‚Üê –°–≤–æ–π—Å—Ç–≤–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
  }
  
  async testConnection() {
    // –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏:
    this.isConnected = true;
  }
  
  disconnect() {
    // –ü—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏:
    this.isConnected = false;
  }
}
```

### –í PrinterManager:
```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
const isConnected = adapter.isConnected;

if (isConnected) {
  // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ MQTT
  return realData;
} else {
  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ offline
  return offlineData;
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```
‚úÖ Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å "Offline"
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–ø–∞–Ω–µ–ª—å http://localhost:8000:
```
‚úÖ Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å "Offline" (—Å–æ–≤–ø–∞–¥–∞–µ—Ç!)
```

### 3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä:
```
‚úÖ –û–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å "Online"
```

### 4. –û—Ç–∫–ª—é—á–∏—Ç–µ Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä:
```
‚úÖ –û–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å "Offline"
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### Real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
```
–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üê‚Üí MQTT ‚Üê‚Üí Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä
        ‚Üì
   PrinterManager
        ‚Üì
   Web-—Å–µ—Ä–≤–µ—Ä ‚Üê‚Üí Web-–ø–∞–Ω–µ–ª—å
```

**–¢–µ–ø–µ—Ä—å –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å!**

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!**

- ‚úÖ **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** Offline
- ‚úÖ **–í–µ–±-–ø–∞–Ω–µ–ª—å:** Offline (—Å–æ–≤–ø–∞–¥–∞–µ—Ç!)
- ‚úÖ **Real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** MQTT –∞–¥–∞–ø—Ç–µ—Ä–∞
- ‚úÖ **–ù–µ—Ç –ª–æ–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –≤ –∫—ç—à–µ

**Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤–æ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö!** üöÄ

---

## üìã –ò—Ç–æ–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞

| –°—Ç–∞—Ç—É—Å MQTT | –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –í–µ–±-–ø–∞–Ω–µ–ª—å | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|-------------|-------------------|------------|-----------|
| **–ü–æ–¥–∫–ª—é—á–µ–Ω** | üü¢ Online | üü¢ Online | ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ |
| **–û—Ç–∫–ª—é—á–µ–Ω** | üî¥ Offline | üî¥ Offline | ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ |

**–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** ‚úÖ
