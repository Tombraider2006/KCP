# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Bambu Lab offline —Å—Ç–∞—Ç—É—Å–∞

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

**Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–ª —Ä–∞–∑–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã:**
- **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** Offline ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- **–í–µ–±-–ø–∞–Ω–µ–ª—å:** –ì–æ—Ç–æ–≤ ‚ùå (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à–µ!)

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–≥–¥–∞ Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä —Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è offline, –µ–≥–æ offline —Å—Ç–∞—Ç—É—Å –ù–ï –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ web-—Å–µ—Ä–≤–µ—Ä, –ø–æ—ç—Ç–æ–º—É –≤ –∫—ç—à–µ –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ.

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–±—Ä–∞–ª –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å "ready" –≤ web-—Å–µ—Ä–≤–µ—Ä–µ

**–§–∞–π–ª:** `src/web-server.js`

**–ë—ã–ª–æ:**
```javascript
determineStatus(statusData) {
  if (!statusData) return 'unknown';
  
  // ... –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ ...
  
  return 'ready'; // ‚Üê –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≥–æ—Ç–æ–≤, –µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!)
}
```

**–°—Ç–∞–ª–æ:**
```javascript
determineStatus(statusData) {
  if (!statusData) return 'unknown';
  
  // ... –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ ...
  
  // –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 'ready' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é!
  // –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 'unknown'
  return 'unknown';
}
```

---

### 2. –î–æ–±–∞–≤–∏–ª –ø–µ—Ä–µ–¥–∞—á—É offline —Å—Ç–∞—Ç—É—Å–∞ –¥–ª—è Bambu Lab

**–§–∞–π–ª:** `src/renderer.js`

**–ë—ã–ª–æ:**
```javascript
if (printer.status !== 'offline' && window.electronAPI && window.electronAPI.requestBambuStatus) {
  // –¢–æ–ª—å–∫–æ –¥–ª—è online –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
  window.electronAPI.updatePrinterData(printer.id, printerStatusData);
}
// ‚Üê –ù–ï–¢ else –¥–ª—è offline –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤!
```

**–°—Ç–∞–ª–æ:**
```javascript
if (printer.status !== 'offline' && window.electronAPI && window.electronAPI.requestBambuStatus) {
  // –î–ª—è online –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  window.electronAPI.updatePrinterData(printer.id, printerStatusData);
} else if (printer.status === 'offline') {
  // Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä offline - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º offline —Å—Ç–∞—Ç—É—Å –≤ web-—Å–µ—Ä–≤–µ—Ä
  const offlineStatusData = {
    state: 'offline',
    stateText: 'Offline',
    progress: 0,
    fileName: '',
    temps: { nozzle: 0, bed: 0 }
  };
  window.electronAPI.updatePrinterData(printer.id, offlineStatusData);
}
```

---

## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä Online:
```
1. MQTT –ø–æ–¥–∫–ª—é—á–µ–Ω ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   ‚Üì
2. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ web-—Å–µ—Ä–≤–µ—Ä
   ‚Üì
3. Web-–ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: Online, —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

### Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä Offline:
```
1. MQTT –æ—Ç–∫–ª—é—á–µ–Ω ‚Üí –ø—Ä–∏–Ω—Ç–µ—Ä offline –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
   ‚Üì
2. –û—Ç–ø—Ä–∞–≤–∫–∞ offline —Å—Ç–∞—Ç—É—Å–∞ –≤ web-—Å–µ—Ä–≤–µ—Ä
   ‚Üì
3. Web-–ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: Offline (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ!)
```

---

## ‚úÖ –¢–µ–ø–µ—Ä—å —Å—Ç–∞—Ç—É—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

### –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```
a1 üéã Bambu Lab
üî¥ Offline (MQTT)
```

### –í–µ–±-–ø–∞–Ω–µ–ª—å:
```
a1 üéã Bambu Lab
üî¥ Offline (MQTT)  ‚Üê –¢–µ–ø–µ—Ä—å —Å–æ–≤–ø–∞–¥–∞–µ—Ç!
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```
‚úÖ Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å "Offline"
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–ø–∞–Ω–µ–ª—å http://localhost:8000:
```
‚úÖ Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å "Offline" (—Å–æ–≤–ø–∞–¥–∞–µ—Ç!)
```

### 3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä:
```
‚úÖ –û–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å "Online"
```

### 4. –û—Ç–∫–ª—é—á–∏—Ç–µ Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä:
```
‚úÖ –û–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å "Offline"
```

---

## üîç –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –î–µ—Ñ–æ–ª—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å "ready"
- **–ë—ã–ª–æ:** Web-—Å–µ—Ä–≤–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–ª "ready" –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω
- **–°—Ç–∞–ª–æ:** Web-—Å–µ—Ä–≤–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "unknown" –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ—Ç –ø–µ—Ä–µ–¥–∞—á–∏ offline —Å—Ç–∞—Ç—É—Å–∞
- **–ë—ã–ª–æ:** Offline Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏ —Å—Ç–∞—Ç—É—Å –≤ web-—Å–µ—Ä–≤–µ—Ä
- **–°—Ç–∞–ª–æ:** Offline Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç offline —Å—Ç–∞—Ç—É—Å –≤ web-—Å–µ—Ä–≤–µ—Ä

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à–µ
- **–ë—ã–ª–æ:** –ö—ç—à —Å–æ–¥–µ—Ä–∂–∞–ª —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è offline –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤
- **–°—Ç–∞–ª–æ:** –ö—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è offline —Å—Ç–∞—Ç—É—Å–æ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

---

## üìä –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è offline Bambu Lab

```
1. Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
   ‚Üì
2. –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: printer.status = 'offline'
   ‚Üì
3. –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫: else if (printer.status === 'offline')
   ‚Üì
4. –û—Ç–ø—Ä–∞–≤–∫–∞ offline —Å—Ç–∞—Ç—É—Å–∞ –≤ web-—Å–µ—Ä–≤–µ—Ä
   ‚Üì
5. printerManager.updatePrinterStatus(printerId, offlineData)
   ‚Üì
6. Web-–ø–∞–Ω–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç offline —Å—Ç–∞—Ç—É—Å
```

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!**

- ‚úÖ **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** Offline
- ‚úÖ **–í–µ–±-–ø–∞–Ω–µ–ª—å:** Offline (—Å–æ–≤–ø–∞–¥–∞–µ—Ç!)
- ‚úÖ **Real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** offline —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ **–ù–µ—Ç —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –≤ –∫—ç—à–µ
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤

**Bambu Lab –ø—Ä–∏–Ω—Ç–µ—Ä—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏!** üöÄ

---

## üìã –ò—Ç–æ–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞

| –°—Ç–∞—Ç—É—Å MQTT | –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –í–µ–±-–ø–∞–Ω–µ–ª—å | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|-------------|-------------------|------------|-----------|
| **–ü–æ–¥–∫–ª—é—á–µ–Ω** | üü¢ Online | üü¢ Online | ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ |
| **–û—Ç–∫–ª—é—á–µ–Ω** | üî¥ Offline | üî¥ Offline | ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ |

**–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** ‚úÖ
