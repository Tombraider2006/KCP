# ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ renderer.js

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ (09.10.2025)

–î–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ `src/renderer.js` **–ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**.

### ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

1. **–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ (Table of Contents)** –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ (—Å—Ç—Ä–æ–∫–∏ 1-56)
   - 9 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
   - –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Ctrl+F` –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞

2. **–°–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –ø–æ –≤—Å–µ–º—É —Ñ–∞–π–ª—É:
   ```
   // ============================================================================
   // 1. CONFIGURATION & STATE
   // ============================================================================
   ```

### üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞:

```
renderer.js (5360+ —Å—Ç—Ä–æ–∫)
‚îÇ
‚îú‚îÄ‚îÄ 1. CONFIGURATION & STATE ................ Line 58
‚îÇ   ‚îú‚îÄ‚îÄ 1.1. Application Config ............. Line 62
‚îÇ   ‚îú‚îÄ‚îÄ 1.2. Printer State .................. Line 69
‚îÇ   ‚îú‚îÄ‚îÄ 1.3. Analytics State ................ Line 84
‚îÇ   ‚îú‚îÄ‚îÄ 1.4. Telegram Configuration ......... Line 113
‚îÇ   ‚îî‚îÄ‚îÄ 1.5. Status Priority ................ Line 131
‚îÇ
‚îú‚îÄ‚îÄ 2. INITIALIZATION & SETUP ............... Line 141
‚îÇ   ‚îú‚îÄ‚îÄ 2.1. App Initialization ............. Line 145
‚îÇ   ‚îú‚îÄ‚îÄ 2.2. Data Loading & Persistence ..... Line 247
‚îÇ   ‚îî‚îÄ‚îÄ 2.3. Language & Localization ........ Line 300+
‚îÇ
‚îú‚îÄ‚îÄ 3. PRINTER MANAGEMENT ................... Line 588
‚îÇ   ‚îú‚îÄ‚îÄ 3.1. Add/Edit/Remove Printers ....... Line 592
‚îÇ   ‚îú‚îÄ‚îÄ 3.2. Printer Display & UI ........... Line 2610
‚îÇ   ‚îî‚îÄ‚îÄ 3.3. Status Updates & Sorting ....... Line 1400+
‚îÇ
‚îú‚îÄ‚îÄ 4. PRINTER CONNECTIONS .................. Line 2066
‚îÇ   ‚îú‚îÄ‚îÄ 4.1. Connection Testing ............. Line 2070
‚îÇ   ‚îú‚îÄ‚îÄ 4.2. Klipper Integration ............ Line 2184
‚îÇ   ‚îú‚îÄ‚îÄ 4.3. Bambu Lab Integration .......... Line 2091
‚îÇ   ‚îî‚îÄ‚îÄ 4.4. WebSocket Management ........... Line 2333
‚îÇ
‚îú‚îÄ‚îÄ 5. ANALYTICS SYSTEM ..................... Line 1517
‚îÇ   ‚îú‚îÄ‚îÄ 5.1. Event Tracking ................. Line 1521
‚îÇ   ‚îú‚îÄ‚îÄ 5.2. Metrics Calculation ............ Line 3134
‚îÇ   ‚îú‚îÄ‚îÄ 5.3. Inefficiency Detection ......... Line 1543
‚îÇ   ‚îú‚îÄ‚îÄ 5.4. Analytics UI ................... Line 2694
‚îÇ   ‚îî‚îÄ‚îÄ 5.5. Charts & Visualization ......... Line 2900+
‚îÇ
‚îú‚îÄ‚îÄ 6. NOTIFICATIONS ........................ Line 4491
‚îÇ   ‚îú‚îÄ‚îÄ 6.1. Telegram Integration ........... Line 4495
‚îÇ   ‚îî‚îÄ‚îÄ 6.2. Notification Sending ........... Line 4719
‚îÇ
‚îú‚îÄ‚îÄ 7. NETWORK SCANNER ...................... ~4800+
‚îÇ
‚îú‚îÄ‚îÄ 8. UTILITY FUNCTIONS .................... ~5000+
‚îÇ   ‚îú‚îÄ‚îÄ 8.1. Formatters
‚îÇ   ‚îú‚îÄ‚îÄ 8.2. Status Helpers
‚îÇ   ‚îî‚îÄ‚îÄ 8.3. Temperature Sensors
‚îÇ
‚îî‚îÄ‚îÄ 9. UI MODALS & INTERACTIONS ............. Various
```

---

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

### –°–ø–æ—Å–æ–± 1: –ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É —Å—Ç—Ä–æ–∫–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ `renderer.js`
2. –ù–∞–∂–º–∏—Ç–µ `Ctrl+G` (Go to line)
3. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –∏–∑ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—è
4. –ù–∞–∂–º–∏—Ç–µ Enter

### –°–ø–æ—Å–æ–± 2: –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É
1. –û—Ç–∫—Ä–æ–π—Ç–µ `renderer.js`
2. –ù–∞–∂–º–∏—Ç–µ `Ctrl+F`
3. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä: `// 5. ANALYTICS SYSTEM`
4. –ù–∞–∂–º–∏—Ç–µ Enter

### –°–ø–æ—Å–æ–± 3: Outline/Symbols (VS Code)
1. –û—Ç–∫—Ä–æ–π—Ç–µ `renderer.js`
2. –ù–∞–∂–º–∏—Ç–µ `Ctrl+Shift+O` (Go to Symbol)
3. –£–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

### –ù–∞–π—Ç–∏ –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏?
```
Ctrl+F ‚Üí "5.1. Event Tracking" ‚Üí Enter
–ò–ª–∏
Ctrl+G ‚Üí 1521 ‚Üí Enter
```

### –ù–∞–π—Ç–∏ –≥–¥–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram?
```
Ctrl+F ‚Üí "6.1. Telegram Integration" ‚Üí Enter
–ò–ª–∏
Ctrl+G ‚Üí 4495 ‚Üí Enter
```

### –ù–∞–π—Ç–∏ –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Klipper?
```
Ctrl+F ‚Üí "4.2. Klipper Integration" ‚Üí Enter
–ò–ª–∏
Ctrl+G ‚Üí 2184 ‚Üí Enter
```

### –ù–∞–π—Ç–∏ –≥–¥–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç 09.10.2025?
```
Ctrl+F ‚Üí "–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 09.10.2025"
–ù–∞–π–¥–µ—Ç:
- getLocalDateString (timezone fix)
- computeAnalytics (initial state fix)
```

---

## ‚úÖ –ß—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

- ‚ùå –ù–∏–∫–∞–∫–æ–π –ª–æ–≥–∏–∫–∏
- ‚ùå –ù–∏–∫–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚ùå –ù–∏–∫–∞–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚ùå –ù–∏–∫–∞–∫–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è

**–¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏!**

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ
npm start

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
‚úÖ –û–∫–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è
‚úÖ –ü—Ä–∏–Ω—Ç–µ—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è
‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç
‚úÖ –í—Å—ë —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

- **–î–æ–±–∞–≤–ª–µ–Ω–æ:** ~60 —Å—Ç—Ä–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- **–ò–∑–º–µ–Ω–µ–Ω–æ —Ñ—É–Ω–∫—Ü–∏–π:** 0
- **–ò–∑–º–µ–Ω–µ–Ω–æ –ª–æ–≥–∏–∫–∏:** 0
- **–†–∏—Å–∫ –ø–æ–ª–æ–º–∫–∏:** 0%
- **–£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:** 100%

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:

### –î–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:
```
Ctrl+Shift+O ‚Üí –Ω–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏
```

### –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
–í VS Code:
1. –û—Ç–∫—Ä–æ–π—Ç–µ File Explorer (Ctrl+Shift+E)
2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ renderer.js
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ Outline panel —Å–ø—Ä–∞–≤–∞
4. –£–≤–∏–¥–∏—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏

### –î–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å–µ–∫—Ü–∏—è–º–∏:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–∫–ª–∞–¥–∫–∏ (Bookmarks) –≤ VS Code:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ "Bookmarks"
2. –î–æ–±–∞–≤—å—Ç–µ –∑–∞–∫–ª–∞–¥–∫–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–µ–∫—Ü–∏–∏
3. –ë—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –º–µ–∂–¥—É –Ω–∏–º–∏

---

## üéì –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –µ—â–µ —É–ª—É—á—à–∏—Ç—å:

**–í–∞—Ä–∏–∞–Ω—Ç 1:** –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Å–ª–æ–∂–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º
```javascript
// –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∞
// @param periodKey - –ø–µ—Ä–∏–æ–¥ ('1d', '7d', '30d', 'custom')
// @param printerId - ID –ø—Ä–∏–Ω—Ç–µ—Ä–∞ –∏–ª–∏ 'all'
// @param customRange - –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø–µ—Ä–∏–æ–¥ {from, to}
// @returns {Object} –º–µ—Ç—Ä–∏–∫–∏ {totalPrintMs, totalIdleMs, efficiency, ...}
function computeAnalytics(periodKey, printerId, customRange) {
```

**–í–∞—Ä–∏–∞–Ω—Ç 2:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JSDoc
```javascript
/**
 * –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
 * @param {string} periodKey - '1d'|'7d'|'30d'|'custom'
 * @param {string} printerId - ID –ø—Ä–∏–Ω—Ç–µ—Ä–∞ –∏–ª–∏ 'all'
 * @param {{from: number, to: number}} [customRange] - –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø–µ—Ä–∏–æ–¥
 * @returns {{totalPrintMs: number, totalIdleMs: number, efficiency: number}}
 */
function computeAnalytics(periodKey, printerId, customRange) {
```

**–í–∞—Ä–∏–∞–Ω—Ç 3:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å - —É–∂–µ –æ—Ç–ª–∏—á–Ω–æ! ‚úÖ

---

## ‚úÖ –ò—Ç–æ–≥:

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!**

- ‚úÖ –õ–µ–≥—á–µ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω–æ–µ
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –ù–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

**–í—Ä–µ–º—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:** ~10 –º–∏–Ω—É—Ç  
**–†–∏—Å–∫:** 0%  
**–ü–æ–ª—å–∑–∞:** –í—ã—Å–æ–∫–∞—è üéØ

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –ª—é–±—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ —Ñ–∞–π–ª–µ renderer.js –∏—Å–ø–æ–ª—å–∑—É—è –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ –∏–ª–∏ –ø–æ–∏—Å–∫.

