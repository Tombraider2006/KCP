# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã —Å–º–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Å–º–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –ø–æ–¥—Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Å–º–µ–Ω–∞–º–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é –¥–ª—è 3D Printer Control Panel.

---

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. Backend –º–æ–¥—É–ª–∏ (Node.js)

#### `user-manager.js`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–æ–ª—è–º–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ø–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (–∞–∫—Ç–∏–≤–µ–Ω/–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

**–•—Ä–∞–Ω–∏–ª–∏—â–µ:** `users-data` (electron-store, encrypted)

**–†–æ–ª–∏:**
- `admin` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)
- `operator` - –û–ø–µ—Ä–∞—Ç–æ—Ä (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø)

---

#### `shift-manager.js`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–∞–º–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–π —Å–º–µ–Ω—ã
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–º–µ–Ω—ã
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ —Å–º–µ–Ω—ã –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —Å–º–µ–Ω—ã
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–º–µ–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω
- ‚úÖ –†–∞—Å—á–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–º–µ–Ω—ã

**–•—Ä–∞–Ω–∏–ª–∏—â–µ:** `shifts-data` (electron-store, encrypted)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–º–µ–Ω—ã:**
```javascript
{
  id: 'shift_...',
  userId: 'user_...',
  username: 'ivan',
  displayName: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
  role: 'operator',
  startTime: '2025-10-09T12:00:00.000Z',
  endTime: null,
  duration: 0,
  events: [],
  statistics: {
    printsStarted: 0,
    printsCompleted: 0,
    printsFailed: 0,
    printsPaused: 0,
    gaps: 0,
    pauses: 0,
    totalGapTime: 0,
    totalPauseTime: 0,
    efficiencyScore: 100
  },
  notes: []
}
```

---

#### `reports-manager.js`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –∏ —Ä–∞—Å—á–µ—Ç KPI

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∞—Ç–∫–∏—Ö –æ—Ç—á–µ—Ç–æ–≤ (KPI)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
- ‚úÖ –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (–Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤)
- ‚úÖ –†–∞—Å—á–µ—Ç KPI (Productivity, Quality, Efficiency, Reliability)
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤

**–•—Ä–∞–Ω–∏–ª–∏—â–µ:** `reports-data` (electron-store, encrypted)

**–§–æ—Ä–º—É–ª–∞ KPI:**
```
Overall Score = 
  Productivity √ó 0.30 +
  Quality √ó 0.30 +
  Efficiency √ó 0.25 +
  Reliability √ó 0.15
```

---

### 2. Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (HTML/JavaScript)

#### `setup-admin.html`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã

**–§—É–Ω–∫—Ü–∏–∏:**
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è –¥–ª—è –∑–∞–ø–∏—Å–∏

**–°—Ç–∏–ª—å:** Modern gradient UI —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏

---

#### `login.html`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É

**–§—É–Ω–∫—Ü–∏–∏:**
- –í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–ø–∏—Å–∫–∞ (—Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ —Ä–æ–ª—è–º)
- –í–≤–æ–¥ –ø–∞—Ä–æ–ª—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫—Ç–∏–≤–Ω–æ–π —Å–º–µ–Ω–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å–º–µ–Ω—ã –ø—Ä–∏ –≤—Ö–æ–¥–µ

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–≤ –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤ select
- –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –ø–∞—Ä–æ–ª—è –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –≠–º–æ–¥–∑–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ä–æ–ª–µ–π (üëë –∞–¥–º–∏–Ω, üë§ –æ–ø–µ—Ä–∞—Ç–æ—Ä)

---

#### `shift-control-panel.js`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** UI –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–º–µ–Ω–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–í–µ—Ä—Ö–Ω—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å**
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
   - –°—á–µ—Ç—á–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω—ã
   - –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

2. **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"** (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
   - –°–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ (—Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è, –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è, —É–¥–∞–ª–µ–Ω–∏–µ)

3. **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–ü–µ—Ä–µ–¥–∞—á–∞ —Å–º–µ–Ω—ã"**
   - –í—ã–±–æ—Ä –Ω–æ–≤–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
   - –í–≤–æ–¥ –ø–∞—Ä–æ–ª—è –Ω–æ–≤–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ/–Ω–∞—á–∞–ª–æ —Å–º–µ–Ω

4. **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–û—Ç—á–µ—Ç—ã"**
   - –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ (–¥–µ–Ω—å/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü)
   - –í—ã–±–æ—Ä –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –≤–∏–¥–∏—Ç –≤—Å–µ—Ö)
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ KPI –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

---

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `main.js`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```javascript
const UserManager = require('./user-manager');
const ShiftManager = require('./shift-manager');
const userManager = new UserManager();
const shiftManager = new ShiftManager();
```

**–ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞:**
```javascript
mainWindow.on('close', async (event) => {
  if (!canClose) {
    event.preventDefault();
    mainWindow.webContents.send('before-quit-check');
    
    ipcMain.once('confirm-quit', (e, confirmed) => {
      if (confirmed) {
        canClose = true;
        mainWindow.close();
      }
    });
  }
});
```

---

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `preload.js`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```javascript
// Shift Management & User System
onBeforeQuit: (callback) => ipcRenderer.on('before-quit-check', callback),
removeBeforeQuitListener: () => ipcRenderer.removeAllListeners('before-quit-check'),
confirmQuit: (canQuit) => ipcRenderer.send('confirm-quit', canQuit)
```

---

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `index.html`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ `shift-control-panel.js`
2. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è `before-quit-check` —Å –∑–∞–ø—Ä–æ—Å–æ–º –ø–∞—Ä–æ–ª—è
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `setup-admin.html` –∏–ª–∏ `login.html` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `renderer.js`

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

1. **`sendTelegramNotification()`**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–µ
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ

```javascript
const currentUser = await window.electronAPI.storeGet('currentUser', null);
if (currentUser) {
  operatorInfo = `\nüë§ *Operator:* ${currentUser.displayName}`;
}
```

2. **`trackStatusTransition()`**
   - –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ async —Ñ—É–Ω–∫—Ü–∏—é
   - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ–ø–µ—Ä–∞—Ç–æ—Ä–µ –≤ —Å–æ–±—ã—Ç–∏—è

```javascript
const ev = { 
  printerId: printerIdStr, 
  ts: Date.now(), 
  from: fromStatus, 
  to: toStatus,
  operatorId: operatorId,
  operatorName: operatorName
};
```

3. **`checkStatusChanges()`**
   - –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ async —Ñ—É–Ω–∫—Ü–∏—é
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `for...of` –≤–º–µ—Å—Ç–æ `forEach` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ await

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

```javascript
hashPassword(password) {
  return crypto
    .createHash('sha256')
    .update(password + 'salt_3dc_panel_2025')
    .digest('hex');
}
```

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â

–í—Å–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `electron-store` —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º:

```javascript
new Store({
  name: 'users-data',
  encryptionKey: 'y0ur-s3cr3t-k3y-f0r-us3r-d4t4'
});
```

### –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–∞—é—Ç—Å—è –æ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:

```javascript
sanitizeUser(user) {
  const { passwordHash, ...sanitized } = user;
  return sanitized;
}
```

---

## üìä –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
index.html –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞: userManager.isInitialized()?
    ‚Üì
–ù–ï–¢ ‚Üí redirect setup-admin.html
–î–ê ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞: isAuthenticated?
    ‚Üì
–ù–ï–¢ ‚Üí redirect login.html
–î–ê ‚Üí –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞
    ‚Üì
–ó–∞–≥—Ä—É–∑–∫–∞ shift-control-panel.js
    ‚Üì
–°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ä—Ö–Ω–µ–π –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```

### 2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```
login.html
    ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ª–æ–≥–∏–Ω
    ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ø–∞—Ä–æ–ª—å
    ‚Üì
userManager.authenticate(username, password)
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ö–µ—à–∞ –ø–∞—Ä–æ–ª—è
    ‚Üì
–£–°–ü–ï–• ‚Üí –°—Ç–∞—Ä—Ç —Å–º–µ–Ω—ã (–µ—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π)
    ‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ currentUser –≤ electron-store
    ‚Üì
–†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ index.html
```

### 3. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

```
–ü—Ä–∏–Ω—Ç–µ—Ä –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å
    ‚Üì
checkStatusChanges()
    ‚Üì
await trackStatusTransition(printerId, from, to)
    ‚Üì
–ü–æ–ª—É—á–µ–Ω–∏–µ currentUser
    ‚Üì
–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è —Å operatorId/operatorName
    ‚Üì
analytics.events.push(event)
    ‚Üì
–ï—Å–ª–∏ –µ—Å—Ç—å —Å–º–µ–Ω–∞ ‚Üí shiftManager.addShiftEvent()
    ‚Üì
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ statistics —Å–º–µ–Ω—ã
    ‚Üì
–ü–µ—Ä–µ—Å—á–µ—Ç efficiencyScore
```

### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞

```
–ù–∞–∂–∞—Ç–∏–µ "–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç"
    ‚Üì
reportsManager.generateShortReport(userId, period)
    ‚Üì
shiftManager.getUserShiftStatistics(userId, period)
    ‚Üì
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–º–µ–Ω –ø–æ –ø–µ—Ä–∏–æ–¥—É
    ‚Üì
–†–∞—Å—á–µ—Ç KPI (productivity, quality, efficiency, reliability)
    ‚Üì
–†–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ –±–∞–ª–ª–∞ (weighted average)
    ‚Üì
–ê–Ω–∞–ª–∏–∑ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    ‚Üì
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    ‚Üì
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ UI
```

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–º–µ–Ω—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –í–•–û–î –í –°–ò–°–¢–ï–ú–£                                    ‚îÇ
‚îÇ    - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è                                  ‚îÇ
‚îÇ    - shiftManager.startShift()                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. –ê–ö–¢–ò–í–ù–ê–Ø –°–ú–ï–ù–ê                                    ‚îÇ
‚îÇ    - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π                            ‚îÇ
‚îÇ    - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ statistics                           ‚îÇ
‚îÇ    - –†–∞—Å—á–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏                            ‚îÇ
‚îÇ    - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ (notes)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚Üì
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ                ‚îÇ
    –ü–ï–†–ï–î–ê–ß–ê –°–ú–ï–ù–´    –ó–ê–í–ï–†–®–ï–ù–ò–ï –°–ú–ï–ù–´
           ‚îÇ                ‚îÇ
           ‚Üì                ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3a. –ü–ï–†–ï–î–ê–ß–ê     ‚îÇ  ‚îÇ 3b. –ó–ê–í–ï–†–®–ï–ù–ò–ï   ‚îÇ
‚îÇ  - endShift()    ‚îÇ  ‚îÇ  - endShift()    ‚îÇ
‚îÇ  - startShift()  ‚îÇ  ‚îÇ  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ    ‚îÇ
‚îÇ  - –ë–µ–∑ –≤—ã—Ö–æ–¥–∞    ‚îÇ  ‚îÇ  - –í—ã—Ö–æ–¥/–∑–∞–∫—Ä—ã—Ç–∏–µ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ                ‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4. –ò–°–¢–û–†–ò–Ø                                           ‚îÇ
‚îÇ    - –°–º–µ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ shift_history                ‚îÇ
‚îÇ    - –î–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤                            ‚îÇ
‚îÇ    - –•—Ä–∞–Ω–∏—Ç—Å—è –¥–æ 1000 —Å–º–µ–Ω                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –†–∞—Å—á–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–º–µ–Ω—ã

```javascript
recalculateEfficiency() {
  let efficiency = 100;
  
  // 1. –®—Ç—Ä–∞—Ñ –∑–∞ –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–µ—á–∞—Ç–∏ (–¥–æ -20%)
  const failureRate = stats.printsFailed / stats.printsStarted;
  efficiency -= failureRate * 20;
  
  // 2. –®—Ç—Ä–∞—Ñ –∑–∞ –ø–∞—É–∑—ã (–¥–æ -15%)
  const pausePenalty = Math.min(stats.pauses * 2, 15);
  efficiency -= pausePenalty;
  
  // 3. –®—Ç—Ä–∞—Ñ –∑–∞ –ø–µ—Ä–µ—Ä—ã–≤—ã (–¥–æ -20%)
  const gapPenalty = Math.min(stats.gaps * 3, 20);
  efficiency -= gapPenalty;
  
  // 4. –®—Ç—Ä–∞—Ñ –∑–∞ –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è (–¥–æ -25%)
  const totalShiftTime = Date.now() - new Date(shift.startTime);
  const idleTimeRatio = (stats.totalGapTime + stats.totalPauseTime) / totalShiftTime;
  const idlePenalty = Math.min(idleTimeRatio * 30, 25);
  efficiency -= idlePenalty;
  
  return Math.max(0, Math.round(efficiency));
}
```

### –†–∞—Å—á–µ—Ç KPI –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```javascript
// –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (0-100)
const avgPrintsPerHour = printsCompleted / (duration / (1000 * 60 * 60));
const productivity = Math.min(100, avgPrintsPerHour * 20); // 5 –ø–µ—á–∞—Ç–µ–π/—á–∞—Å = 100

// –ö–∞—á–µ—Å—Ç–≤–æ (0-100)
const quality = (printsCompleted / printsStarted) * 100;

// –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (0-100)
const efficiency = averageEfficiencyScore;

// –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (0-100)
const idleRatio = (totalGapTime + totalPauseTime) / totalDuration;
const reliability = Math.max(0, 100 - (idleRatio * 100));

// –û–±—â–∏–π –±–∞–ª–ª (weighted average)
const overallScore = 
  (productivity √ó 0.30) +
  (quality √ó 0.30) +
  (efficiency √ó 0.25) +
  (reliability √ó 0.15);
```

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â

### `users-data`
```json
{
  "users": [
    {
      "id": "user_...",
      "username": "admin",
      "displayName": "Administrator",
      "role": "admin",
      "passwordHash": "sha256...",
      "createdAt": "2025-10-09T...",
      "createdBy": "system",
      "isActive": true,
      "statistics": {...}
    }
  ],
  "action_logs": [...]
}
```

### `shifts-data`
```json
{
  "current_shift": {
    "id": "shift_...",
    "userId": "user_...",
    "startTime": "2025-10-09T...",
    "statistics": {...},
    "events": [...],
    "notes": [...]
  },
  "shift_history": [...],
  "shift_logs": [...]
}
```

### `reports-data`
```json
{
  "saved_reports": [
    {
      "id": "report_...",
      "type": "detailed",
      "userId": "user_...",
      "period": "day",
      "generatedAt": "2025-10-09T...",
      "data": {...}
    }
  ]
}
```

---

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–°–º–µ–Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è** - –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å–º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å —Å–≤–æ–π –ø–∞—Ä–æ–ª—å
2. **Email/SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. **–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤** - PDF, Excel, CSV
4. **–ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è KPI
5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤** - –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è gap/pause –≤—Ä–µ–º–µ–Ω–∏
6. **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤
7. **API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π** - RESTful API
8. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup –¥–∞–Ω–Ω—ã—Ö

---

## üìù Changelog

### v1.6.0 (2025-10-09)
- ‚úÖ –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã —Å–º–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–º–µ–Ω
- ‚úÖ –û—Ç—á–µ—Ç—ã –∏ KPI
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –∏ Analytics

---

**¬© 2025 3D Printer Control Panel**

