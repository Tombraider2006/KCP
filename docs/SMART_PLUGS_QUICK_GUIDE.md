# 🔌 Быстрый гид: Умные розетки для 3D-принтеров

---

## 🚀 В чем суть?

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│   3D Printer Control Panel                             │
│   ========================                              │
│                                                         │
│   ┌──────────┐      ┌──────────┐      ┌──────────┐    │
│   │ Принтер 1│◄────►│ Розетка 1│◄────►│ Питание  │    │
│   └──────────┘      └──────────┘      └──────────┘    │
│                                                         │
│   ┌──────────┐      ┌──────────┐      ┌──────────┐    │
│   │ Принтер 2│◄────►│ Розетка 2│◄────►│ Питание  │    │
│   └──────────┘      └──────────┘      └──────────┘    │
│                                                         │
│   Автоматическое управление питанием!                  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## ⚡ Что это дает?

### 🎯 Топ-5 преимуществ

```
┌─────────────────────────────────────────────────────────┐
│  1. АВТОМАТИЧЕСКОЕ ОТКЛЮЧЕНИЕ                           │
│     📊 Печать завершена → 5 минут → Питание выкл       │
│     💰 Экономия: ~20 Вт × 12 часов = 240 Вт/день       │
├─────────────────────────────────────────────────────────┤
│  2. ЗАЩИТА ОТ ПЕРЕГРЕВА                                 │
│     🔥 MCU > 70°C → Немедленное отключение             │
│     🛡️ Предотвращение пожаров                          │
├─────────────────────────────────────────────────────────┤
│  3. УДАЛЕННОЕ УПРАВЛЕНИЕ                                │
│     🌍 Включение/выключение из любой точки мира        │
│     📱 Через Telegram, Web-интерфейс, приложение        │
├─────────────────────────────────────────────────────────┤
│  4. РЕАЛЬНАЯ АНАЛИТИКА                                  │
│     📈 Точное измерение энергопотребления              │
│     💰 Расчет реальной стоимости печати                │
├─────────────────────────────────────────────────────────┤
│  5. РАСПИСАНИЕ РАБОТЫ                                   │
│     ⏰ Автовключение утром, автовыключение вечером     │
│     🌙 Ночной режим для фермы                          │
└─────────────────────────────────────────────────────────┘
```

---

## 🔌 Какие розетки поддерживаются?

### ✅ Tuya розетки (РЕКОМЕНДУЕТСЯ)

```
Примеры брендов:
├─ Tuya Smart
├─ Gosund
├─ Nedis
├─ BlitzWolf
├─ Meross (с поддержкой Tuya)
└─ Любые розетки с приложением Smart Life

Проверка:
✓ Если работает с приложением Smart Life → Подходит!
✓ Если есть логотип "Tuya Smart" → Подходит!
```

**Цена:** от 500₽ до 1500₽  
**Интеграция:** 🟢 Легко (12 часов разработки)  
**Надежность:** 🟢 Высокая (официальный API)

---

### 🟡 Home Assistant (универсальное решение)

```
Поддерживает ВСЕ розетки:
├─ Tuya
├─ Яндекс
├─ Sonoff
├─ TP-Link
├─ Xiaomi
└─ И многие другие

Требуется:
✓ Установка Home Assistant (дополнительный сервер)
✓ Настройка интеграций
```

**Цена:** Бесплатно (требуется сервер)  
**Интеграция:** 🟡 Средне (6-8 часов разработки + настройка HA)  
**Надежность:** 🟢 Высокая

---

### ❌ Яндекс розетки (НЕ РЕКОМЕНДУЕТСЯ)

```
Проблемы:
├─ ❌ Нет публичного API
├─ ❌ Невозможна прямая интеграция
├─ ❌ Только через облако Яндекс
└─ ❌ Нет официальной поддержки для сторонних приложений

Альтернатива:
→ Использовать Home Assistant
→ Или купить Tuya розетки
```

---

## 💰 Сколько стоит?

### Финансовые затраты

```
┌──────────────────────────────────────────────────────┐
│  Tuya Cloud API:           БЕСПЛАТНО                 │
│  NPM пакеты:               БЕСПЛАТНО                 │
│  Хостинг:                  НЕ ТРЕБУЕТСЯ              │
│  Умная розетка (1 шт):     500₽ - 1500₽             │
│  ─────────────────────────────────────────────────── │
│  ИТОГО на 1 принтер:       500₽ - 1500₽             │
│  ИТОГО на ферму (10 шт):   5000₽ - 15000₽           │
└──────────────────────────────────────────────────────┘

Окупаемость:
• Экономия электроэнергии: ~30% = ~500₽/мес на ферму
• Окупаемость: 10-30 месяцев
• Но главное - БЕЗОПАСНОСТЬ! (бесценно)
```

### Временные затраты

```
┌──────────────────────────────────────────────────────┐
│  Настройка Tuya IoT:       30 минут                  │
│  Разработка MVP:           12 часов                  │
│  Полная версия:            30 часов                  │
│  ─────────────────────────────────────────────────── │
│  ИТОГО (MVP):              12.5 часов                │
│  ИТОГО (FULL):             30.5 часов                │
└──────────────────────────────────────────────────────┘
```

---

## 🛠️ Как настроить?

### Шаг 1: Купить розетки (30 минут)

```
1. Поиск на Ozon/Яндекс.Маркет/AliExpress:
   "Умная розетка Tuya"
   "Умная розетка Smart Life"
   "Умная розетка Gosund"

2. Проверка совместимости:
   ✓ Поддержка Smart Life приложения
   ✓ Wi-Fi 2.4 GHz
   ✓ Мощность: 16A (3680 Вт) - достаточно для принтера

3. Рекомендуемые модели:
   • Gosund SP111 - от 500₽
   • Tuya Smart Plug - от 600₽
   • Meross MSS310 - от 800₽
```

---

### Шаг 2: Регистрация на Tuya IoT (15 минут)

```
1. Открыть https://iot.tuya.com
2. Нажать "Sign Up" (бесплатно)
3. Создать Cloud Project:
   - Выбрать регион: Europe
   - Выбрать Industry: Smart Home
4. Получить:
   ✓ Access ID
   ✓ Access Secret
5. Подключить API:
   - API Products → Smart Home → Subscribe
```

---

### Шаг 3: Подключение розеток (10 минут)

```
1. Скачать приложение Smart Life:
   📱 Android: Google Play
   🍎 iOS: App Store

2. Зарегистрироваться в Smart Life

3. Добавить розетки:
   • Вставить розетку в сеть
   • Нажать кнопку 5 сек → мигает индикатор
   • В приложении: "+" → "Socket" → Автопоиск
   • Подключить к Wi-Fi 2.4 GHz
   • Готово!

4. Переименовать розетки:
   • Розетка 1 → "Принтер Ender"
   • Розетка 2 → "Принтер Prusa"
   • И т.д.
```

---

### Шаг 4: Привязка к проекту (5 минут)

```
1. На Tuya IoT Platform:
   • Cloud Project → Link Tuya App Account
   • Ввести логин/пароль от Smart Life
   • Нажать "Link"

2. Проверка:
   • Cloud → API Explorer → Get Device List
   • Должны появиться все розетки

3. Сохранить:
   ✓ Access ID
   ✓ Access Secret
   ✓ Device IDs (каждой розетки)
```

---

### Шаг 5: Интеграция в проект (12 часов)

```
Для разработчиков:
1. Установить пакет:
   npm install @tuya/tuya-connector-nodejs

2. Создать модуль tuya-adapter.js

3. Добавить UI для управления

4. Реализовать автоматизацию

5. Интегрировать с основным кодом

6. Тестирование

📄 Подробнее: docs/SMART_PLUGS_INTEGRATION_RESEARCH.md
```

---

## 📊 Примеры сценариев

### Сценарий 1: Завершение печати

```
┌─────────────────────────────────────────────────────┐
│  1. Принтер завершил печать                         │
│     ↓                                               │
│  2. Программа получает статус "Complete"            │
│     ↓                                               │
│  3. Ждет 5 минут (настраиваемо)                    │
│     ↓                                               │
│  4. Отправляет команду в Tuya API                   │
│     ↓                                               │
│  5. Розетка выключает питание                       │
│     ↓                                               │
│  6. Уведомление в Telegram: "Принтер отключен"     │
│     ↓                                               │
│  7. ✅ Экономия ~20 Вт/час                          │
└─────────────────────────────────────────────────────┘

Экономия за год на 1 принтер:
20 Вт × 12 часов × 365 дней = 87.6 кВт/год
87.6 кВт × 6₽/кВт = ~525₽/год
```

---

### Сценарий 2: Защита от перегрева

```
┌─────────────────────────────────────────────────────┐
│  1. Датчик MCU показывает 72°C (критично!)          │
│     ↓                                               │
│  2. Программа обнаруживает превышение порога        │
│     ↓                                               │
│  3. ⚠️ НЕМЕДЛЕННО:                                  │
│     • Отправляет команду в Tuya API                 │
│     • Выключает питание принтера                    │
│     ↓                                               │
│  4. Отправляет критическое уведомление:             │
│     "🔥 КРИТИЧНО! Принтер отключен из-за перегрева" │
│     ↓                                               │
│  5. Логирует инцидент в аналитику                   │
│     ↓                                               │
│  6. ✅ Предотвращен потенциальный пожар             │
└─────────────────────────────────────────────────────┘

Ценность: БЕСЦЕННО (безопасность оборудования и помещения)
```

---

### Сценарий 3: Ночной режим фермы

```
┌─────────────────────────────────────────────────────┐
│  Расписание:                                        │
│  ├─ 07:00 → Включение всех принтеров                │
│  ├─ 23:00 → Выключение всех принтеров              │
│  └─ Выходные → Работа 24/7                          │
│                                                     │
│  Результат:                                         │
│  • Работа только в рабочее время                    │
│  • Автоматизация без участия оператора             │
│  • Экономия электроэнергии ~30%                    │
│  • Соблюдение трудового распорядка                 │
└─────────────────────────────────────────────────────┘

Экономия за месяц на ферму из 10 принтеров:
10 принтеров × 200 Вт × 16 часов × 30 дней = 960 кВт/мес
960 кВт × 30% = 288 кВт экономии
288 кВт × 6₽/кВт = ~1728₽/месяц
```

---

## ❓ Часто задаваемые вопросы

### Q: Работает ли без интернета?

```
Tuya Cloud API → ❌ Требует интернет
Home Assistant → ✅ Может работать локально (зависит от розеток)
Локальный Tuya → ✅ Работает без интернета (но сложно настроить)
```

**Рекомендация:** Для 3D-фермы интернет обычно есть, так что Tuya Cloud API - оптимальный вариант.

---

### Q: Сколько розеток можно подключить?

```
Ограничение Tuya Cloud API:
└─ 1,000,000 вызовов API/месяц (бесплатно)

Расчет на 1 принтер:
├─ Проверка статуса: каждые 10 секунд
├─ 6 вызовов/минуту × 60 минут × 24 часа × 30 дней
└─ = 259,200 вызовов/месяц на 1 принтер

Максимум принтеров:
└─ 1,000,000 / 259,200 = ~3-4 принтера

Оптимизация:
├─ Проверка статуса каждые 30 секунд → 12 принтеров
├─ Проверка статуса каждые 60 секунд → 24 принтера
└─ Для большего количества → WebSocket или Paid Plan
```

**Вывод:** Для небольшой фермы (до 10 принтеров) бесплатного плана достаточно.

---

### Q: Что делать, если у меня розетки Яндекс?

```
Вариант 1: Home Assistant (рекомендуется)
├─ Установить Home Assistant на Raspberry Pi или сервер
├─ Подключить розетки Яндекс через интеграцию
├─ Интегрировать 3D Printer Control Panel с Home Assistant API
└─ ✅ Все работает

Вариант 2: Купить Tuya розетки (проще)
├─ Цена: от 500₽/шт
├─ Простая настройка
├─ Надежная работа
└─ ✅ Рекомендуется для новичков
```

---

### Q: Безопасно ли это?

```
Безопасность Tuya Cloud API:
✅ Официальная платформа с миллионами пользователей
✅ Шифрование всех данных (HTTPS, TLS)
✅ OAuth 2.0 авторизация
✅ Регулярные обновления безопасности
✅ Compliance: GDPR, ISO 27001

Безопасность умных розеток:
✅ Сертификация: CE, RoHS, FCC
✅ Защита от перегрузки
✅ Защита от короткого замыкания
✅ Термостойкий пластик
✅ Рейтинг: 16A, 3680W (достаточно для любого принтера)
```

**Вывод:** Да, безопасно. Миллионы пользователей используют Tuya ежедневно.

---

## ✅ Финальный чеклист

### Готовы начать?

```
□ Понял, зачем нужна интеграция
□ Выбрал розетки (Tuya рекомендуется)
□ Прочитал краткую сводку (SMART_PLUGS_SUMMARY_RU.md)
□ Готов купить розетки (500-1500₽/шт)
□ Готов зарегистрироваться на Tuya IoT Platform
□ Готов выделить 12 часов на разработку MVP
□ Понял, как это работает
```

### Если все галочки стоят → Вперед! 🚀

---

## 📚 Дополнительные ресурсы

### Документация проекта

```
📄 Краткая сводка:
   → docs/SMART_PLUGS_SUMMARY_RU.md
   ⏱️ Время чтения: 5 минут

📄 Полное исследование:
   → docs/SMART_PLUGS_INTEGRATION_RESEARCH.md
   ⏱️ Время чтения: 20 минут
   📋 Включает: примеры кода, архитектуру, план реализации

📄 Быстрый гид (этот документ):
   → docs/SMART_PLUGS_QUICK_GUIDE.md
   ⏱️ Время чтения: 10 минут
   📋 Визуальные схемы, FAQ, чеклисты
```

### Внешние ресурсы

```
🌐 Tuya IoT Platform:
   → https://iot.tuya.com

📚 Tuya документация:
   → https://developer.tuya.com/en/docs/iot

🔧 Tuya Node.js SDK:
   → https://github.com/tuya/tuya-connector-nodejs

📱 Smart Life приложение:
   → Android: Google Play
   → iOS: App Store
```

---

## 🎯 Следующие шаги

### Шаг 1: Прочитать документацию

```
1. Если нужна краткая сводка:
   📄 SMART_PLUGS_SUMMARY_RU.md (5 минут)

2. Если нужны детали и код:
   📄 SMART_PLUGS_INTEGRATION_RESEARCH.md (20 минут)

3. Если нужны визуальные схемы:
   📄 SMART_PLUGS_QUICK_GUIDE.md (этот документ, 10 минут)
```

---

### Шаг 2: Зарегистрироваться на Tuya

```
🌐 https://iot.tuya.com
⏱️ Время: 15 минут
💰 Стоимость: Бесплатно
```

---

### Шаг 3: Купить розетки

```
🔍 Где искать: Ozon, Яндекс.Маркет, AliExpress
💰 Цена: от 500₽/шт
📦 Рекомендуемые: Gosund SP111, Tuya Smart Plug
```

---

### Шаг 4: Начать разработку

```
📄 План разработки в:
   SMART_PLUGS_INTEGRATION_RESEARCH.md → Раздел "План реализации"

⏱️ Время на MVP: 12 часов
⏱️ Время на FULL: 30 часов
```

---

## 🎉 Заключение

### ТРИ главных вывода:

```
1️⃣  Интеграция умных розеток - ЭТО НУЖНО!
    • Автоматизация
    • Безопасность
    • Экономия

2️⃣  Tuya Cloud API - ЛУЧШИЙ ВЫБОР
    • Официальная поддержка
    • Бесплатно
    • Просто настроить

3️⃣  MVP за 12 часов - РЕАЛЬНО!
    • Ручное управление
    • Автоотключение
    • Базовая автоматизация
```

---

### 🚀 Готовы начать?

```
1. Прочитать полную документацию
2. Зарегистрироваться на Tuya IoT
3. Купить розетки
4. Начать разработку

💪 Удачи в разработке!
```

---

**Автор:** AI Assistant  
**Дата:** 10 октября 2025  
**Версия:** 1.0

---

📄 **Краткая сводка:** [SMART_PLUGS_SUMMARY_RU.md](SMART_PLUGS_SUMMARY_RU.md)  
📄 **Полное исследование:** [SMART_PLUGS_INTEGRATION_RESEARCH.md](SMART_PLUGS_INTEGRATION_RESEARCH.md)  
📄 **Индекс документации:** [INDEX.md](INDEX.md)

