# üî¨ 3D Printer Control Panel v1.5.13 - IFRAME DEBUG (Critical Finding)

## ‚ö†Ô∏è –≠–¢–û –û–¢–õ–ê–î–û–ß–ù–ê–Ø –í–ï–†–°–ò–Ø

**–í–µ—Ä—Å–∏—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–±–ª–µ–º—ã —Å iframe –≤ Bambu Lab –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ**

---

## üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –û–ë–ù–ê–†–£–ñ–ï–ù–ò–ï

### –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞ –≤ v1.5.12!

**–°–∫—Ä–∏–ø—Ç –≤ `bambu-printer-interface.html` (iframe) –ù–ï –í–´–ü–û–õ–ù–Ø–ï–¢–°–Ø!**

### –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏–∑ –ª–æ–≥–æ–≤ v1.5.12:

‚úÖ **Parent window —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `postMessage sent successfully` (10+ —Ä–∞–∑)
- `Iframe exists?: true`
- `ContentWindow exists?: true`
- –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

‚ùå **Iframe –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- **–ù–ï–¢ –ª–æ–≥–æ–≤** `[BAMBU IFRAME]`
- **–ù–ï–¢ –ª–æ–≥–æ–≤** `Received postMessage`
- **–ù–ï–¢ –ª–æ–≥–æ–≤** `Updating interface`
- **–°–∫—Ä–∏–ø—Ç –≤–æ–æ–±—â–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è!**

---

## üî¨ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ v1.5.13

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:

```javascript
[BAMBU IFRAME] Script tag executed!       // –°–∞–º—ã–π –ø–µ—Ä–≤—ã–π –ª–æ–≥
[BAMBU IFRAME] Window location: ...       // URL iframe
[BAMBU IFRAME] Parent exists?: true       // –ü—Ä–æ–≤–µ—Ä–∫–∞ parent
[BAMBU IFRAME] Global error: ...          // –õ—é–±—ã–µ –æ—à–∏–±–∫–∏ JS
[BAMBU IFRAME] DOMContentLoaded event     // –ó–∞–≥—Ä—É–∑–∫–∞ DOM
[BAMBU IFRAME] setupPostMessage called    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ listeners
```

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫:
- `window.addEventListener('error')` - –ª–æ–≤–∏—Ç –≤—Å–µ JavaScript –æ—à–∏–±–∫–∏
- `window.addEventListener('unhandledrejection')` - –ª–æ–≤–∏—Ç –æ—à–∏–±–∫–∏ –ø—Ä–æ–º–∏—Å–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∏ environment:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `window.location.href` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ –ø—É—Ç—å?
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `window.parent !== window` - –≤ iframe –ª–∏ –º—ã?

---

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ v1.5.13
### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–Ω—Ç–µ—Ä Bambu Lab
### 3. –û—Ç–∫—Ä–æ—é—Ç—Å—è DevTools

### 4. –°–º–æ—Ç—Ä–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å:

#### –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `[BAMBU IFRAME] Script tag executed!`:
‚úÖ **–°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è** - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –ª–æ–≥–∏–∫–µ

#### –ï—Å–ª–∏ –ù–ï –≤–∏–¥–∏—Ç–µ `[BAMBU IFRAME]`:
‚ùå **–°–∫—Ä–∏–ø—Ç –≤–æ–æ–±—â–µ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è** - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∑–∞–≥—Ä—É–∑–∫–µ iframe

### 5. –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

**–í–∫–ª–∞–¥–∫–∞ Elements (DOM):**
- –ù–∞–π–¥–∏—Ç–µ iframe —Å `src="src/bambu-printer-interface.html"`
- –ö–ª–∏–∫–Ω–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí Inspect
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∑–∞–≥—Ä—É–∂–µ–Ω –ª–∏ HTML –≤–Ω—É—Ç—Ä–∏ iframe

**–í–∫–ª–∞–¥–∫–∞ Network:**
- –ò—â–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `bambu-printer-interface.html`
- –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `200 OK`
- –ï—Å–ª–∏ `404` –∏–ª–∏ –æ—à–∏–±–∫–∞ - —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω

**–í–∫–ª–∞–¥–∫–∞ Console:**
- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ `src/bambu-printer-interface.html` (dropdown –≤–≤–µ—Ä—Ö—É)
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ iframe

---

## üîç –ß—Ç–æ –º—ã –∏—â–µ–º

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
–ï—Å–ª–∏ –≤–∏–¥–∏–º –ª–æ–≥–∏ `[BAMBU IFRAME]` - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –ª–æ–≥–∏–∫–µ postMessage

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–∫—Ä–∏–ø—Ç –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
- –§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (404)
- CSP –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML/JS
- –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

---

## üí¨ –ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–ï –∏–∑ –∫–æ–Ω—Å–æ–ª–∏:**
1. –í—Å–µ –ª–æ–≥–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ —Å `[BAMBU IFRAME]`)
2. –í—Å–µ –æ—à–∏–±–∫–∏ (–∫—Ä–∞—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
3. –°–∫—Ä–∏–Ω—à–æ—Ç –≤–∫–ª–∞–¥–∫–∏ Network (–µ—Å–ª–∏ –µ—Å—Ç—å 404)
4. –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–Ω—Å–æ–ª–∏ (iframe –∏–ª–∏ top)

**–¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- –ó–∞–≥—Ä—É–∂–µ–Ω –ª–∏ HTML –≤ iframe? (Elements ‚Üí iframe ‚Üí –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π HTML)
- –ï—Å—Ç—å –ª–∏ —Ñ–∞–π–ª `src/bambu-printer-interface.html` –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏?

---

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### macOS (–¥–ª—è –≤–∞—à–µ–≥–æ —Ç–æ–≤–∞—Ä–∏—â–∞)
–°–∫–∞—á–∞–π—Ç–µ `3D Printer Control Panel-1.5.13-macOS-Universal.dmg`

### Windows
–°–∫–∞—á–∞–π—Ç–µ `3D Printer Control Panel-1.5.13-Windows-Setup.exe`

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏:

1. Parent —Å–æ–∑–¥–∞–µ—Ç iframe: `<iframe src="src/bambu-printer-interface.html">`
2. –ë—Ä–∞—É–∑–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç HTML —Ñ–∞–π–ª
3. –ü–∞—Ä—Å–∏—Ç HTML
4. **–í—ã–ø–æ–ª–Ω—è–µ—Ç `<script>` —Ç–µ–≥** ‚Üê –ó–î–ï–°–¨ –ó–ê–°–¢–†–ï–í–ê–ï–¢
5. `console.log('[BAMBU IFRAME] Script tag executed!')` ‚Üê –≠–¢–û–ì–û –ù–ï–¢ –í –õ–û–ì–ê–•!

### –ü—Ä–æ–≤–µ—Ä–∫–∞ CSP:

CSP –≤ iframe:
```html
<meta http-equiv="Content-Security-Policy" 
      content="default-src 'self' 'unsafe-inline' data:; 
               script-src 'self' 'unsafe-inline';">
```

`'unsafe-inline'` —Ä–∞–∑—Ä–µ—à–µ–Ω ‚Üí —Å–∫—Ä–∏–ø—Ç—ã –î–û–õ–ñ–ù–´ —Ä–∞–±–æ—Ç–∞—Ç—å

---

**–í–µ—Ä—Å–∏—è**: 1.5.13 (IFRAME DEBUG)  
**–î–∞—Ç–∞**: 09.10.2025  
**–ê–≤—Ç–æ—Ä**: Tom Tomich  
**–°—Ç–∞—Ç—É—Å**: üî¨ Draft - Critical Debug

